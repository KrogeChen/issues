## 2023-07-25 需求说明

**AIO供水水温需要根据当前区域的负荷状态做出动态响应，按照负荷的大小，水温在设定基准水温--最低允许水温之间变动**

**此次方案在乐清木头办公室试用，效果评估出来后，再决定如何推广**

**周晋华为具体方案编制和实施人员**


## 概念介绍
**最高焓值            ：指系统区域内,有2次或3次侧能需的设备中焓值最高的区域**

**最低焓值            ：指系统区域内,有2次或3次侧能需的设备中焓值最低的区域**

**最高露点温度        ：指系统区域内,有2次或3次侧能需的设备中露点最高的区域。**

**焓值补偿温度        ：根据焓值大小,动态的补偿一个温度(可正可负)**

**混水动态安全目标温度：= 最高露点温度 + 露点偏移带宽(默认-3.0℃)**

**混水最低设定温度    ：混水最小设定温度，默认16.0℃**

**混水运行目标温度    ：= 最高露点温度 + 焓补偿温度。必须同时小于混水动态安全目标温度和混水最低设定温度**


焓值补偿共9档 ：上电默认在5档,时间积分温度 = 0.0℃。

    | ---1档  焓补偿温度 = - 2.0℃ - 时间积分温度                  
    |----2档  焓补偿温度 = - 1.5℃                      
    |----3档  焓补偿温度 = - 1.0℃                     
    |----4档  焓补偿温度 = - 0.5℃
    |----5档  焓补偿温度 =   0.0℃
    |----6档  焓补偿温度 = + 0.5℃                     
    |----7档  焓补偿温度 = + 1.0℃                     
    |----8档  焓补偿温度 = + 1.5℃                     
    |----9档  焓补偿温度 = + 2.0℃`
    
焓值运算逻辑

    |
    |
    `--参数获取：获取范围--有2次3次能需的区域，仅有1次侧能需的房间剔除   
    |       |
    |       |
    |       `--最低焓值获取      
    |       |
    |       |
    |       `--最高焓值获取    	
    |
    |
    `--焓值档位运算获取混水运行目标温度 
    |
    |
    `--混水运行目标温度安运算 
           |
	       |
           `--混水运行目标温度 >= 混水动态安全目标温度
	       |      |
	       |      |
           |      `--混水运行目标温度 >= 混水最低设定温度
	       |      |     |
	       |      |     |
           |      |     `--混水运行目标温度无需修正
	       |      |
	       |      |
           |      `--混水运行目标温度 <  混水最低设定温度
	       |	    |
	       |            |
           |            `--混水运行目标温度 = 混水最低设定温度
           |
	       |
           `--混水运行目标温度 < 混水动态安全目标温度
	             |
	             |
                 `--混水动态安全目标温度 >= 混水最低设定温度
		     |     |
	             |     |
                 |     `--混水运行目标温度 = 混水动态安全目标温度
	             |
	             |
                  `--混水动态安全目标温度 <  混水最低设定温度
		           |
	                   |
                        `--混水运行目标温度 = 混水最低设定温度
	       

焓值档位运算

    |--1档	
	|     |
	|     |
	|     `--最高焓值 <= 74: 变更为2档 
	|     |
    |     |
	|     `--30分钟1档维持定时器：定时时间到,时间积分温度累加0.5℃ 
    |                             
    |    
    `--2档	
	|     |
	|     |
	|     `--最高焓值 <= 69: 变更为3档 	
	|     |
	|     |
	|     `--最高焓值 >= 75: 变更为1档 	
	|
    | 
    `--3档	
	|     |
	|     |
	|     `--最高焓值 <= 64: 变更为4档 	
	|     |
	|     |
	|     `--最高焓值 >= 70: 变更为2档 	
	|
    | 
    `--4档	
	|     |
	|     |
	|     `--最高焓值 <  59: 变更为5档 	
	|     |
	|     |
	|     `--最高焓值 >= 65: 变更为3档	
	|
    | 
    `--5档	
	|     |
	|     |
	|     `--最高焓值 >= 61: 变更为4档 	
	|     |
	|     |
	|     `--最低焓值 <= 55: 变更为6档 
	|
    | 
    `--6档	
	|     |
	|     |
	|     `--最高焓值 >= 61: 变更为4档 	
	|     |
	|     |
	|     `--最低焓值 >= 56: 变更为5档 	
	|     |
	|     |
	|     `--最低焓值 <= 50: 变更为7档 	
	|
    | 
    `--7档	
	|     |
	|     |
	|     `--最高焓值 >= 61: 变更为4档 	
	|     |
	|     |
	|     `--最低焓值 >= 51: 变更为6档 	
	|     |
	|     |
	|     `--最低焓值 <= 45: 变更为8档 
	|
    | 
    `--8档	
	|     |
	|     |
	|     `--最高焓值 >= 61: 变更为4档 	
	|     |
	|     |
	|     `--最低焓值 >= 46: 变更为7档 	
	|     |
	|     |
	|     `--最低焓值 <= 40: 变更为9档 	
	|
    | 
    `--9档	
	     |
	     |
	     `--最高焓值 >= 61: 变更为4档 	
	     |
	     |
	     `--最低焓值 >= 41: 变更为8档 	
